#config_version=4

#todo
# Sound pool for kickers, slings, and pops

mode:
  start_events: ball_starting
  priority: 100

event_player:
  mode_base_started:
    jukebox_up
    light_mission_select
  world_tour_fail:
    light_mission_select
  money_bags_fail:
    light_mission_select
  music_awards_fail: #made
    light_mission_select
  jukebox_fail: #made
    light_mission_select
  play_poker_fail:
    light_mission_select
  hit_jukebox{count==3}:
    light_lock_1
  hit_jukebox{count==8}:
    light_hilo
  hit_jukebox{count==16}:
    light_lock_2
  hit_jukebox{count==2}: ## Should be 24
    start_jukebox_hurryup
  hit_jukebox{count==36}:
    light_lock_3
  hit_jukebox{count==48}:
    light_hilo
  hit_jukebox{count==64}:
    start_jukebox_hurryup
  ball_ending:
    fade_out_base_music

config:
  - display

led_player:
  s_leftoutlane_active:
    l_begin_round:
      color: ff9027
  s_leftoutlane_inactive:
    l_begin_round:
      color: 7f4813


sound_pools:
    beats:
        type: random
        sounds:
          drum1
          drum2
          drum3
          drum5
          drum6
          drum7
          drum8
          drum9
          drum10
          drum11
          drum12
          drum13
          drum14
          drum15
          drum16

sound_player:
  mode_base_started:
    wait_to_plunge:
        action: play
        loops: -1
        events_when_looping: wait_to_plunge_looped
  start_base_music_bed:
    plunged:
        action: play
        loops: 0
        #events_when_stopped: start_step_3
    wait_to_plunge:
        action: stop
#  start_step_3:
    base_bed_loop:
        action: play
        loops: -1
  fade_in_base_music:
    base_bed_loop:
        action: play
        fade_in: 500ms
  fade_out_base_music: # all possible base game music is in this section, though only one plays at a time
    plunged:
        action: stop
        fade_out: 500ms
    wait_to_plunge:
        action: stop
        fade_out: 500ms
    base_bed_loop:
        action: stop
        fade_out: 500ms
  timer_sound_timer_complete:
    base_bed_loop:
        action: stop
        fade_out: 500ms
  sw_toggle:
    beats:
        action: play
        loops: 0
  sw_quarter:
    quarter:
        action: play
        loops: 0
  drop_target_bank_drop_targets_mixed{down==1}:
    applause_1:
      action: play
      loops: 0
  drop_target_bank_drop_targets_mixed{down==2}:
    applause_2:
      action: play
      loops: 0
  drop_target_bank_drop_targets_mixed{down==3}:
    applause_3:
      action: play
      loops: 0
  drop_target_bank_drop_targets_mixed{down==4}:
    applause_4:
      action: play
      loops: 0
  drop_target_bank_drop_targets_down:
    applause_5:
      action: play
      loops: 0
  s_leftorbit_active:
    left_loop:
      action: play
      loops: 0
  s_rightrampopto:
    fire_whoosh:
      action: play
      loops: 0

timers:
  sound_timer:
    start_value: 1
    end_value: 0
    direction: down
    tick_interval: 500ms
    control_events:
      - event: fade_out_base_music
        action: start

logic_blocks:
  counters:
    lb_jukebox_counter:
      count_events: sw_jukebox_hit
      events_when_hit: hit_jukebox #Hook the "count" parameter of this event ?? Can I do that in config?
      starting_count: 0
#      count_complete_value: 100
      direction: up
      # Brian: I think there is no max to this? Just keep counting
#      events_when_complete: jukebox_maxed #Maybe this lights everything for 15 secs. Extra ball, super jets, special, etc...
      disable_events: mission_started, mode_jukebox_hurryup_started
      enable_events: mode_base_started, end_jukebox_mode, money_bags_done, music_awards_done, play_poker_done, stop_world_tour, mode_jukebox_hurryup_stopping
    lb_music_gate:
      count_events: s_plungerlane_inactive
      starting_count: 0
      count_complete_value: 1
      events_when_complete: start_base_music_bed
      enable_events: mode_base_started
      disable_events: start_base_music_bed|1s

scoring:
    shot_pops_hit:
        score: 10
        jackpot: 5000
    bd_lower_vuk_ball_enter:
        score: 500
    s_jukeboxOpto_active:
        score: 9999
    shot_left_lane_hit:
        score: 500
    shot_right_lane_hit:
        score: 500
    upper_lanes_default_lit_complete:
        score: 10000
    shot_left_drops_hit:
        score: 500
    shot_right_drops_hit:
        score: 500
    s_spinner_active:
        score: 1000
    shot_right_ramp_full_loop_hit:
        score: 3000
    s_leftorbit_active:
        score: 25000
    shot_standups_hit:
        score: 500
    shot_slings_hit:
        score: 10
    s_topkickingtarget_active:
        score: 10
    s_bottomkickingtarget_active:
        score: 500
        jackpot: 50000
    shot_spinner_to_vuk_hit:
        score: 500
    shot_pops_to_vuk_hit:
        score: 300
    s_leftinlane_active:
        score: 5000
    s_rightinlane_active:
        score: 5000
    s_topkicker_active:
        score: 5000
#
#slides:
#  camera:
#    type: camera
#
#slide_player:
#  s_spinner_active:
#    camera:
#    - type: camera
#      width: 800
#      height: 480
#      target: stage

queue_relay_player:
  balldevice_bd_lower_vuk_ball_eject_attempt:
    post: eject_flash
    wait_for: eject_alert_over
  balldevice_bd_top_right_vuk_ball_eject_attempt:
    post: top_eject_flash
    wait_for: top_eject_alert_over

show_player:
  eject_flash:
    eject_alert:
      loops: 0
      show_tokens:
        led: l_lower_left_flasher
      priority: 1000000
  top_eject_flash:
    top_eject_alert:
      loops: 0
      show_tokens:
        led: l_right_ramp_flasher
      priority: 1000000
  s_spinner_active:
    flash_once:
      loops: 0
      speed: 1.5
      show_tokens:
        led: l_center_longhorn
      priority: 1000000
      sync_ms: 0
  s_leftpop_active:
    flash_once:
      loops: 0
      show_tokens:
        led: l_left_pop
      priority: 1000000
      sync_ms: 0
  s_bottompop_active:
    flash_once:
      loops: 0
      show_tokens:
        led: l_bottom_pop
      priority: 1000000
      sync_ms: 0
  s_rightpop_active:
    flash_once:
      loops: 0
      show_tokens:
        led: l_right_pop
      priority: 1000000
      sync_ms: 0
  s_rightrampopto_active:
    flash_once:
      loops: 3
      speed: 1
      show_tokens:
        led: l_right_ramp_flasher
      sync_ms: 0
  s_leftrampopto_active:
    flash_once:
      loops: 3
      speed: 1
      show_tokens:
        led: l_left_ramp_flasher
      sync_ms: 0
  ball_save_main_enabled:
    flash:
      show_tokens:
        leds: l_shoot, l_again
      key: ball_save
  ball_save_main_hurry_up:
    flash:
      show_tokens:
        leds: l_shoot, l_again
      key: ball_save
      speed: 2
  ball_save_main_disabled:
      ball_save: stop

shots:
  album_rotator:
    hit_events: shot_pops_hit, shot_slings_hit
    profile: album_rotator
  shot_left_lane:
    switch: s_LeftLane
  shot_right_lane:
    switch: s_RightLane
  shot_pops:
    switch: s_leftpop, s_rightpop, s_bottompop
  shot_left_drops:
    switch: s_droptarget1, s_DropTarget2, s_droptarget3
  shot_right_drops: #Broken up so I can block this shot when I need to knock down targets
    switch:  s_droptarget4, s_droptarget5
  shot_standups:
    switch: s_rightbanktop, s_rightbankbottom, s_toprightstandup
  shot_slings:
    switch: s_leftsling, s_rightsling
  shot_pops_to_vuk:
    switch: s_TopRightVUK
    delay_switch:
      s_spinner: 2s # this matches the value in the spinner_to_vuk sequence.
#  rotate_album_multipliers:
#    switch: s_leftpop, s_rightpop, s_bottompop, s_leftsling, s_rightsling, s_bottomkickingtarget, s_topkickingtarget

#Shot with sequences
  shot_right_ramp_full_loop:
    switch_sequence: s_rightRampOpto, s_LeftRampOpto
    time: 1000ms
  shot_subway_shot:   # Seems like a weird name, but probably should have this one
    switch_sequence: s_SubwayOpto, s_LowerVUKOpto
    time: 500ms
  shot_lower_vuk_from_playfield:
    hit_events: balldevice_bd_lower_vuk_ball_enter
    delay_switch:
      s_subwayopto: 2s
  shot_spinner_to_vuk:
    switch_sequence: s_spinner, s_TopRightVUK
    time: 2s
  shot_jukebox_loop:
    switch: s_jukeboxopto

shot_profiles:
#    album_rotator:
#        states:
#            - name: silver
#              show: silver
#            - name: gold
#              show: gold
#            - name: platinum
#              show: platinum
#            - name: double
#              show: double
#            - name: quintuple
#              show: quintuple
#        loop: yes

    album_rotator:
      show: album_rotator
      states:
        - name: silver
        - name: gold
        - name: platinum
        - name: double
        - name: quintuple
      loop: yes
      player_variable: lit_album

    managers_choice:
        states:
          - name: unlit
            show: off
          - name: lit
            show: flash
          - name: active
            show: on
        loop: no

    stealth:
      states:
        - name: off
          show: off
      advance_on_hit: false

shows:
  album_rotator:
      - leds:
          l_silver: on
          l_quintuple_platinum: off
      - leds:
          l_gold: on
          l_silver: off
      - leds:
          l_single_platinum: on
          l_gold: off
      - leds:
          l_double_platinum: on
          l_single_platinum: off
      - leds:
          l_quintuple_platinum: on
          l_double_platinum: off
  flash_once:
    - time: 0
      leds:
        (led): on
    - time: 200ms
      leds:
        (led): off
    - time: 50ms
  flash_jukebox:
    - duration: 125ms
      leds:
        l_jukebox_left: on-f0
        l_jukebox_right: off-f0
    - duration: 125ms
      leds:
        l_jukebox_left: off-f0
        l_jukebox_right: on-f0
  eject_alert:
    - time: 0
      leds:
        (led): on
    - time: 300ms
      leds:
        (led): off
    - time: 450ms
      leds:
        (led): on
    - time: 750ms
      leds:
        (led): off
    - time: 900ms
      leds:
        (led): on
    - time: 1200ms
      leds:
        (led): off
    - time: 1350ms
      events: eject_alert_over
  top_eject_alert:
    - time: 0
      leds:
        (led): on
    - time: 300ms
      leds:
        (led): off
    - time: 450ms
      leds:
        (led): on
    - time: 750ms
      leds:
        (led): off
    - time: 900ms
      leds:
        (led): on
    - time: 1200ms
      leds:
        (led): off
    - time: 1350ms
      events: top_eject_alert_over

shot_groups:
    upper_lanes:
        shots: shot_left_lane, shot_right_lane
        profile: default
        rotate_left_events: s_leftflipper_active
        rotate_right_events: s_rightflipper_active
        reset_events: upper_lanes_default_lit_complete
        enable_events: ball_started
        disable_events: ball_ending

ball_saves:
  main:
    active_time: 8s
    hurry_up_time: 2s
    grace_period: 1s
    early_ball_save_events: s_rightoutlane_active, s_leftoutlane_active
    timer_start_events: playfield_active
