#config_version=4
mode:
  start_events: start_jukebox_hurryup
  stop_events: stop_jukebox_hurryup
  priority: 1000

##todo
#Do math on score timer info
#slides to show score counting down and time left

event_player:
  mode_jukebox_hurryup_started: fade_out_base_music
  mode_jukebox_hurryup_stopping: fade_in_base_music
  timer_jb_display_timer_complete: stop_jukebox_hurryup

scoring:
  ï»¿sw_jukebox_hit:
     score: current_player.jukebox_hurryup_jb_score_timer_tick * 667|block

timers:
  start_timer: #This just plays while we show some dots
    start_value: 3
    end_value: 0
    direction: down
    tick_interval: 1s
    control_events:
      - event: mode_jukebox_hurryup_started
        action: start

  jb_display_timer:
    start_value: 15
    max_value: 15
    end_value: 0
    direction: down
    tick_interval: 1s
    control_events:
        - event: sw_subway
          action: pause
        - event: balldevice_playfield_ball_enter
          action: start
        - event: timer_start_timer_complete
          action: start
        - event: sw_jukebox_hit
          action: add
          value: 7

  jb_score_timer:
    start_value: 150
    max_value: 150
    end_value: 0
    direction: down
    tick_interval: 100ms
    control_events:
        - event: timer_jb_display_timer_started
          action: start
        - event: timer_jb_display_timer_paused
          action: pause
        - event: timer_jb_display_timer_stopped
          action: stop
        - event: sw_jukebox_hit
          action: add
          value: 70


logic_blocks:
  counters:
    jukebox_reset_counter:
      count_events: sw_jukebox
      events_when_hit: reset_jukebox_hurryup
      direction: up
      starting_count: 0
      count_complete_value: 5
      disable_on_complete: true

slide_player:
  mode_jukebox_hurryup_started:
    jukebox_hurryup_stage:
      target: stage
  timer_jb_display_timer_tick: jukebox_hurryup_dmd

slides:
  jukebox_hurryup_stage:
    widgets:
      - type: image
        image: jb_hurryup_arrow
        anchor_x: middle
        anchor_y: top
        x: middle
        y: top
        animations:
          show_slide:
            - property: y
              value: 190
              duration: 800ms
            - property: y
              value: 480
              duration: 800ms
              repeat: true
      - type: video
        video: jb_hurry_up_foggy_mountain
        end_behavior: loop
  jukebox_hurryup_dmd:
    widgets:
      - type: text
        text: (ticks)



# Need a light show in here that turns off other things and just lights the hurry up shot

# Also need scoring for whatever that shot is
